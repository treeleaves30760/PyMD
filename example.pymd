# PyExecMD: Python-Executable Markdown

Welcome to PyMD! This document demonstrates the powerful combination of markdown-style syntax with Python code execution.

## Key Features

- **Markdown Syntax**: Use familiar markdown outside code blocks
- **Python Execution**: Run Python code inside ``` blocks  
- **Variable Persistence**: Variables persist across code blocks
- **Beautiful Output**: Clean, responsive HTML rendering

Let's explore these features with live examples!

## Basic Python Execution

```
# Define some variables
name = "PyExecMD"
version = "0.1.0"
year = 2025

pymd.text(f"Welcome to **{name}** v{version}!")
pymd.text(f"Created in {year}")
```

The variables we just defined are available in subsequent code blocks:

```
pymd.text(f"Confirming: We're using **{name}** version **{version}**")

# Let's do some calculations
numbers = [1, 2, 3, 4, 5]
total = sum(numbers)
average = total / len(numbers)

pymd.text(f"Numbers: {numbers}")
pymd.text(f"Sum: **{total}**")
pymd.text(f"Average: **{average}**")
```

## Data Analysis with Pandas

```
import pandas as pd
import numpy as np

# Create sample sales data
np.random.seed(42)
months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun']
products = ['Widget A', 'Widget B', 'Widget C']

data = []
for product in products:
    for month in months:
        sales = np.random.randint(50, 200)
        data.append({'Product': product, 'Month': month, 'Sales': sales})

df = pd.DataFrame(data)
pymd.text("**Sample Sales Data:**")
pymd.table(df.head(10))
```

Let's analyze this data:

```
# Calculate total sales by product
product_totals = df.groupby('Product')['Sales'].sum().sort_values(ascending=False)
pymd.text("**Total Sales by Product:**")
for product, sales in product_totals.items():
    pymd.text(f"  {product}: **${sales:,}**")

pymd.text(f"**Best performing product:** {product_totals.index[0]}")
pymd.text(f"**Total sales across all products:** ${product_totals.sum():,}")
```

## Data Visualization

```
import matplotlib.pyplot as plt

# Create a sales trend chart
monthly_totals = df.groupby('Month')['Sales'].sum()

plt.figure(figsize=(10, 6))
plt.plot(monthly_totals.index, monthly_totals.values, marker='o', linewidth=2, markersize=8)
plt.title('Total Sales Trend by Month', fontsize=16, fontweight='bold')
plt.xlabel('Month', fontsize=12)
plt.ylabel('Total Sales ($)', fontsize=12)
plt.grid(True, alpha=0.3)
plt.xticks(rotation=45)

# Add value labels on points
for i, v in enumerate(monthly_totals.values):
    plt.text(i, v + 20, f'${v:,}', ha='center', va='bottom', fontweight='bold')

plt.tight_layout()
pymd.image(plt.gcf(), "Monthly sales trend showing business growth")
```

Let's also create a product comparison chart:

```
# Product performance comparison
plt.figure(figsize=(10, 6))
bars = plt.bar(product_totals.index, product_totals.values, 
               color=['#FF6B6B', '#4ECDC4', '#45B7D1'], alpha=0.8)

plt.title('Total Sales by Product', fontsize=16, fontweight='bold')
plt.xlabel('Product', fontsize=12)
plt.ylabel('Total Sales ($)', fontsize=12)
plt.grid(True, alpha=0.3, axis='y')

# Add value labels on bars
for bar, value in zip(bars, product_totals.values):
    plt.text(bar.get_x() + bar.get_width()/2, bar.get_height() + 50, 
             f'${value:,}', ha='center', va='bottom', fontweight='bold')

plt.tight_layout()
pymd.image(plt.gcf(), "Product sales comparison showing Widget A leading")
```

## Advanced Python Features

```
# Define a custom analysis function
def analyze_product_performance(df, product_name):
    product_data = df[df['Product'] == product_name]
    
    stats = {
        'total_sales': product_data['Sales'].sum(),
        'avg_monthly': product_data['Sales'].mean(),
        'best_month': product_data.loc[product_data['Sales'].idxmax(), 'Month'],
        'worst_month': product_data.loc[product_data['Sales'].idxmin(), 'Month'],
        'consistency': product_data['Sales'].std()
    }
    
    return stats

# Analyze each product
pymd.h2("Detailed Product Analysis")

for product in products:
    stats = analyze_product_performance(df, product)
    pymd.h3(product)
    pymd.text(f"Total Sales: **${stats['total_sales']:,}**")
    pymd.text(f"Monthly Average: **${stats['avg_monthly']:.0f}**")
    pymd.text(f"Best Month: **{stats['best_month']}**")
    pymd.text(f"Worst Month: **{stats['worst_month']}**")
    pymd.text(f"Consistency (std dev): **${stats['consistency']:.2f}**")
```

## Code Display Feature

Sometimes you want to show code without executing it:

```
# Example algorithm for reference
algorithm_code = '''
def fibonacci(n):
    """Generate fibonacci sequence up to n terms."""
    sequence = []
    a, b = 0, 1
    
    for _ in range(n):
        sequence.append(a)
        a, b = b, a + b
    
    return sequence

def is_prime(num):
    """Check if a number is prime."""
    if num < 2:
        return False
    for i in range(2, int(num ** 0.5) + 1):
        if num % i == 0:
            return False
    return True
'''

pymd.code(algorithm_code, "python")
pymd.text("**Algorithm examples displayed above (not executed)**")
```

Now let's actually use one of those functions:

```
# Execute the fibonacci function
exec(algorithm_code)  # This makes the functions available

# Generate fibonacci sequence
fib_sequence = fibonacci(10)
pymd.text(f"First 10 Fibonacci numbers: **{fib_sequence}**")

# Check some numbers for primality
test_numbers = [17, 25, 29, 35, 41]
pymd.text("**Prime number check:**")
for num in test_numbers:
    result = "prime" if is_prime(num) else "not prime"
    pymd.text(f"  {num} is **{result}**")
```

## PyMD Helper Functions

You can also use PyMD functions to create content programmatically:

```
pymd.h2("Programmatically Generated Content")
pymd.text("This header and text were created using PyMD functions within a code block.")

# Create a summary table
summary_data = pd.DataFrame({
    'Metric': ['Total Products', 'Total Months', 'Total Records', 'Average Sale', 'Max Sale'],
    'Value': [len(products), len(months), len(df), f"${df['Sales'].mean():.2f}", f"${df['Sales'].max()}"]
})

pymd.table(summary_data)
```

## Markdown Features

Outside code blocks, you can use standard markdown syntax:

### Lists Work Great

- First unordered item
- Second unordered item  
- Third unordered item

1. First ordered item
2. Second ordered item
3. Third ordered item

### Mixed Content

You can seamlessly mix markdown content with code blocks. This makes documentation clean and readable while keeping the code execution powerful.

## Interactive Development

```
# Real-time updates
import datetime
current_time = datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")
pymd.text(f"Document last executed: **{current_time}**")

# You can modify this code and see results update immediately
message = "Try changing this message and saving the file!"
pymd.text(f"**Message:** {message}")
```

## Conclusion

This example demonstrates PyMD's powerful features:

1. **Clean Syntax**: Markdown-style headers, lists, and text
2. **Code Execution**: Python code runs and displays output
3. **Variable Persistence**: Data flows between code blocks
4. **Rich Visualizations**: Matplotlib charts render beautifully
5. **Data Analysis**: Full pandas functionality
6. **Mixed Content**: Seamless blend of documentation and code

```
# Final message
success_message = "ðŸŽ‰ PyMD makes technical documentation beautiful and interactive!"
pymd.text(f"**Success Message:** {success_message}")

# Show some final stats
pymd.h3("Document Stats")
pymd.text(f"- Data points analyzed: **{len(df)}**")
pymd.text(f"- Visualizations created: **2**")
pymd.text(f"- Functions defined: **3**")
pymd.text(f"- Variables available: **{len([var for var in globals() if not var.startswith('_')])}**")
```

That's PyMD in action! Try modifying the code blocks above and watch the results update in real-time with the live preview server.

// This is a comment - it won't appear in the rendered output
// Perfect for leaving notes during development!